{% extends "map/header.html" %}
{% load static %}

{% block content%}
  <div class="container">
    <div class="row">
      <div class="col s12 m6 l6">
        <div style="display: flex; align-items: center; margin-top:7px;">
          {% if user.profile.avatar %}
            <img id="nav-avatar" height="64" style="border-radius: 50%;" class="right" src="/media/{{user.profile.avatar}}"></img>&nbsp;&nbsp;&nbsp;
          {% endif %}
          <p style="font-size: 240%;">{{user.username}}</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12 m12">
        <form action="/preferences/" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <div id="skills" class="chips"></div>
            <input type="submit" value="Submit">
        </form>
      </div>
    </div>

  </div>
  <script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
  var elems = document.querySelectorAll('#skills');
  var instances = M.Chips.init(elems, {
    data: [
    {% for skill in user.profile.skills.all %}
    {
      tag: '{{skill.skill}}'
    },
    {% endfor %}],
    autocompleteOptions: {
      data: {
        {% for skill in skillset %}
          '{{skill.skill}}' : null,
        {% endfor %}
      },
    },
    placeholder: 'Offers',
  });
});

</script>
{% endblock %}
